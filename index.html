<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DHT11 IoT Dashboard</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #fafbf7;
      color: #333;
      margin: 0;
      text-align: center;
    }

    header {
      background-color: #556b2f;
      color: white;
      padding: 20px;
      font-size: 24px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    nav {
      background-color: #f8f7dc;
      padding: 10px;
    }

    nav a {
      color: #556b2f;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
    }

    .container {
      margin-top: 40px;
    }

    .card {
      display: inline-block;
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 250px;
    }

    h2 { color: #556b2f; }

    #ai-box {
      max-width: 600px;
      margin: 40px auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    select {
      margin-top: 10px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    footer {
      background-color: #f8f7dc;
      color: #333;
      padding: 10px;
      position: fixed;
      bottom: 0;
      width: 100%;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <header id="header">
    ЁЯМбя╕П IoT Environment Dashboard
  </header>

  <nav>
    <a href="index.html" id="nav-dashboard">Dashboard</a>
    <a href="about.html" id="nav-about">About Project</a>
  </nav>

  <div class="container">
    <div class="card">
      <h2 id="temp-title">Temperature</h2>
      <p id="temp">-- ┬░C</p>
    </div>
    <div class="card">
      <h2 id="hum-title">Humidity</h2>
      <p id="hum">-- %</p>
    </div>
  </div>

  <div id="ai-box">
    <h2 id="ai-title">AI Insights</h2>
    <p id="ai-text">Loading AI analysis...</p>
  </div>

  <div>
    <label for="lang">ЁЯМР Language:</label>
    <select id="lang">
      <option value="en">English</option>
      <option value="hi">рд╣рд┐рдиреНрджреА</option>
      <option value="ta">родрооро┐ро┤рпН</option>
    </select>
  </div>

  <footer id="footer">
    DHT11 IoT Project ┬й 2025 | Team [Edit Your Name]
  </footer>

  <script>
    const channelID = "3118657";
    const readAPIKey = "UH1LTJ16P4A5RXR4";
    const geminiAPIKey = "AIzaSyCBERPpsVpvqSwDrfmF-Jm5X60fw3mJ-kU"; // Your Gemini API Key

    // Translation dictionary
    const translations = {
      en: {
        header: "ЁЯМбя╕П IoT Environment Dashboard",
        navDashboard: "Dashboard",
        navAbout: "About Project",
        tempTitle: "Temperature",
        humTitle: "Humidity",
        aiTitle: "AI Insights",
        aiText: "Loading AI analysis...",
        footer: "DHT11 IoT Project ┬й 2025 | Team [Edit Your Name]"
      },
      hi: {
        header: "ЁЯМбя╕П рдЖрдИрдУрдЯреА рдкрд░реНрдпрд╛рд╡рд░рдг рдбреИрд╢рдмреЛрд░реНрдб",
        navDashboard: "рдбреИрд╢рдмреЛрд░реНрдб",
        navAbout: "рдкрд░рд┐рдпреЛрдЬрдирд╛ рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ",
        tempTitle: "рддрд╛рдкрдорд╛рди",
        humTitle: "рдирдореА",
        aiTitle: "рдПрдЖрдИ рд╡рд┐рд╢реНрд▓реЗрд╖рдг",
        aiText: "рдПрдЖрдИ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...",
        footer: "DHT11 IoT рдкрд░рд┐рдпреЛрдЬрдирд╛ ┬й 2025 | рдЯреАрдо [рдЕрдкрдирд╛ рдирд╛рдо рдбрд╛рд▓реЗрдВ]"
      },
      ta: {
        header: "ЁЯМбя╕П роРроУроЯро┐ роЪрпБро▒рпНро▒рпБроЪрпНроЪрпВро┤ро▓рпН роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ",
        navDashboard: "роЯро╛ро╖рпНрокрпЛро░рпНроЯрпБ",
        navAbout: "рокрпНро░ро╛роЬрпЖроХрпНроЯрпН рокро▒рпНро▒ро┐",
        tempTitle: "ро╡рпЖрокрпНрокроиро┐ро▓рпИ",
        humTitle: " роИро░рокрпНрокродроорпН",
        aiTitle: "роПроР рокроХрпБрокрпНрокро╛ропрпНро╡рпБ",
        aiText: "роПроР рокроХрпБрокрпНрокро╛ропрпНро╡рпБ роПро▒рпНро▒рокрпНрокроЯрпБроХро┐ро▒родрпБ...",
        footer: "DHT11 роРроУроЯро┐ родро┐роЯрпНроЯроорпН ┬й 2025 | роХрпБро┤рпБ [роЙроЩрпНроХро│рпН рокрпЖропро░рпИ рокродро┐роХрпНроХро╡рпБроорпН]"
      }
    };

    function updateLanguage(lang) {
      document.getElementById("header").textContent = translations[lang].header;
      document.getElementById("nav-dashboard").textContent = translations[lang].navDashboard;
      document.getElementById("nav-about").textContent = translations[lang].navAbout;
      document.getElementById("temp-title").textContent = translations[lang].tempTitle;
      document.getElementById("hum-title").textContent = translations[lang].humTitle;
      document.getElementById("ai-title").textContent = translations[lang].aiTitle;
      document.getElementById("ai-text").textContent = translations[lang].aiText;
      document.getElementById("footer").textContent = translations[lang].footer;
    }

    async function fetchData() {
      try {
        const response = await fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPIKey}&results=1`);
        const data = await response.json();
        const latest = data.feeds[data.feeds.length - 1];
        const temp = latest.field1;
        const hum = latest.field2;

        document.getElementById("temp").textContent = temp + " ┬░C";
        document.getElementById("hum").textContent = hum + " %";

        getAIInsights(temp, hum);
      } catch (err) {
        console.error("Error fetching data:", err);
        document.getElementById("ai-text").textContent = "Error fetching sensor data.";
      }
    }

    async function getAIInsights(temp, hum) {
      const lang = document.getElementById("lang").value;
      let prompt = "";

      if(lang === "hi") {
        prompt = `рдЗрд╕ рддрд╛рдкрдорд╛рди ${temp}┬░C рдФрд░ рдирдореА ${hum}% рдХреЗ рдЖрдзрд╛рд░ рдкрд░ рд╡рд╛рддрд╛рд╡рд░рдг рдХреЗ рдмрд╛рд░реЗ рдореЗрдВ рдПрдХ рдЫреЛрдЯрд╛ рд╡рд┐рд╢реНрд▓реЗрд╖рдг рд▓рд┐рдЦреЗрдВред`;
      } else if(lang === "ta") {
        prompt = `роЗроирпНрод ро╡рпЖрокрпНрокроиро┐ро▓рпИ ${temp}┬░C рооро▒рпНро▒рпБроорпН роИро░рокрпНрокродроорпН ${hum}% роЕроЯро┐рокрпНрокроЯрпИропро┐ро▓рпН роЪрпБро▒рпНро▒рпБроЪрпНроЪрпВро┤ро▓рпН рокро▒рпНро▒ро┐роп роТро░рпБ роЪрпБро░рпБроХрпНроХрооро╛рой рокроХрпБрокрпНрокро╛ропрпНро╡рпИ роОро┤рпБродрпБроХ.`;
      } else {
        prompt = `Based on temperature ${temp}┬░C and humidity ${hum}%, give a short analysis of the environment.`;
      }

      try {
        const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${geminiAPIKey}`, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            prompt: prompt,
            max_output_tokens: 150
          })
        });

        const result = await response.json();
        const aiText = result.candidates?.[0]?.content?.parts?.[0]?.text || "AI could not generate insight.";
        document.getElementById("ai-text").textContent = aiText;
      } catch (error) {
        console.error("Error fetching AI insights:", error);
        document.getElementById("ai-text").textContent = "Error loading AI insights.";
      }
    }

    fetchData();
    setInterval(fetchData, 15000);

    document.getElementById("lang").addEventListener("change", function() {
      updateLanguage(this.value);
      fetchData(); // Update AI insights after language change
    });

    // Initialize
    updateLanguage("en");
  </script>

</body>
</html>
