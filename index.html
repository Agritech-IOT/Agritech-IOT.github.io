<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>DHT11 IoT Dashboard</title>
  <style>
    body {
      font-family: "Poppins", sans-serif;
      background: #fafbf7;
      color: #333;
      margin: 0;
      text-align: center;
    }

    header {
      background-color: #556b2f; /* olive green */
      color: white;
      padding: 20px;
      font-size: 24px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }

    nav {
      background-color: #f8f7dc; /* very light yellow */
      padding: 10px;
    }

    nav a {
      color: #556b2f;
      text-decoration: none;
      margin: 0 15px;
      font-weight: 500;
    }

    .container {
      margin-top: 40px;
    }

    .card {
      display: inline-block;
      background: white;
      padding: 20px;
      border-radius: 12px;
      margin: 20px;
      box-shadow: 0 4px 8px rgba(0,0,0,0.1);
      width: 250px;
    }

    h2 { color: #556b2f; }

    #ai-box {
      max-width: 600px;
      margin: 40px auto;
      background: #ffffff;
      padding: 20px;
      border-radius: 12px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }

    select {
      margin-top: 10px;
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    footer {
      background-color: #f8f7dc;
      color: #333;
      padding: 10px;
      position: fixed;
      bottom: 0;
      width: 100%;
      font-size: 14px;
    }
  </style>
</head>
<body>

  <header>
    üå°Ô∏è IoT Environment Dashboard
  </header>

  <nav>
    <a href="index.html">Dashboard</a>
    <a href="about.html">About Project</a>
  </nav>

  <div class="container">
    <div class="card">
      <h2>Temperature</h2>
      <p id="temp">-- ¬∞C</p>
    </div>
    <div class="card">
      <h2>Humidity</h2>
      <p id="hum">-- %</p>
    </div>
  </div>

  <div id="ai-box">
    <h2>AI Insights</h2>
    <p id="ai-text">Loading AI analysis...</p>
  </div>

  <div>
    <label>üåê Language:</label>
    <select id="lang">
      <option value="en">English</option>
      <option value="hi">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</option>
    </select>
  </div>

  <footer>
    DHT11 IoT Project ¬© 2025 | Team [Edit Your Name]
  </footer>

  <script>
    const channelID = "3118657";
    const readAPIKey = "UH1LTJ16P4A5RXR4";

    async function fetchData() {
      try {
        const response = await fetch(`https://api.thingspeak.com/channels/${channelID}/feeds.json?api_key=${readAPIKey}&results=1`);
        const data = await response.json();
        const latest = data.feeds[data.feeds.length - 1];
        const temp = latest.field1;
        const hum = latest.field2;

        document.getElementById("temp").textContent = temp + " ¬∞C";
        document.getElementById("hum").textContent = hum + " %";

        getAIInsights(temp, hum);
      } catch (err) {
        console.error("Error fetching data:", err);
      }
    }

    async function getAIInsights(temp, hum) {
      const lang = document.getElementById("lang").value;
      const prompt = lang === "hi"
        ? `‡§á‡§∏ ‡§§‡§æ‡§™‡§Æ‡§æ‡§® ${temp} ‡§î‡§∞ ‡§®‡§Æ‡•Ä ${hum} ‡§ï‡•á ‡§Ü‡§ß‡§æ‡§∞ ‡§™‡§∞ ‡§µ‡§æ‡§§‡§æ‡§µ‡§∞‡§£ ‡§ï‡•á ‡§¨‡§æ‡§∞‡•á ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§õ‡•ã‡§ü‡§æ ‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£ ‡§≤‡§ø‡§ñ‡•á‡§Ç‡•§`
        : `Based on temperature ${temp}¬∞C and humidity ${hum}%, give a short analysis of the environment.`;

      try {
        const response = await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=YOUR_GEMINI_API_KEY", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({
            contents: [{ parts: [{ text: prompt }] }]
          })
        });

        const result = await response.json();
        const aiText = result.candidates?.[0]?.content?.parts?.[0]?.text || "AI could not generate insight.";
        document.getElementById("ai-text").textContent = aiText;
      } catch (error) {
        document.getElementById("ai-text").textContent = "Error loading AI insights.";
      }
    }

    fetchData();
    setInterval(fetchData, 15000);

    document.getElementById("lang").addEventListener("change", fetchData);
  </script>
</body>
</html>
